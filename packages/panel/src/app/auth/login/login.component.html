<div class="container">
  <mat-card class="mat-elevation-z16 shadow">
    <mat-card-content>
      <div class="content">
        <img id="logo" src="assets/icons/logo.svg">
        <br>
        <form (ngSubmit)="checkUsername()" *ngIf="step === 'username'" [@fadeIn]>
          <h3>ورود به پنل</h3>
          <mat-form-field appearance="fill">
            <mat-label> تلفن همراه یا نام کاربری </mat-label>
            <input #usernameInput [disabled]="loading" matInput [(ngModel)]="username" required [ngModelOptions]="{standalone: true}">
          </mat-form-field>
          <button mat-flat-button [disabled]="loading" color="primary" type="submit">
            مرحله بعد
          </button>
        </form>
      
        <form (ngSubmit)="login(user.mobilePhone, token)" *ngIf="step === 'token'" [@fadeIn]>
          <h3>رمز یکبار مصرف</h3>
          <div>
            <button mat-button (click)="step = 'username'" tabindex="-1" type="button">
              <i class="far fa-arrow-right"></i>
              بازگشت
            </button>
          </div>
          <p class="gray">یک کد عددی برای شماره {{user.mobilePhone}} ارسال شد. آن را در کادر زیر وارد کنید</p>
          <mat-form-field appearance="fill">
            <mat-label> کد یکبار مصرف </mat-label>
            <input #tokenInput [disabled]="loading" matInput [(ngModel)]="token" required [ngModelOptions]="{standalone: true}">
          </mat-form-field>
          <button mat-flat-button [disabled]="loading" color="primary" type="submit">
            ورود
          </button>
        </form>
      
        <form (ngSubmit)="login(username, password)" *ngIf="step === 'password'" [@fadeIn]>
          <h3>رمز ورود</h3>
          <div>
            <button mat-button (click)="step = 'username'" tabindex="-1" type="button">
              <i class="far fa-arrow-right"></i>
              بازگشت
            </button>
          </div>
          <mat-form-field appearance="fill">
            <mat-label> رمز ورود </mat-label>
            <input #passwordInput [disabled]="loading" matInput [(ngModel)]="password" [type]="showPassword ? 'text' : 'password'" required [ngModelOptions]="{standalone: true}">
            <i *ngIf="!showPassword" class="fas fa-eye eye-icon" (click)="showPassword = !showPassword" matSuffix></i>
            <i *ngIf="showPassword" class="fas fa-eye-slash eye-icon" (click)="showPassword = !showPassword" matSuffix></i>
          </mat-form-field>
          <button mat-flat-button [disabled]="loading" color="primary" type="submit">
            ورود
          </button>
          <span spacer></span>
          <button mat-button *ngIf="user.mobilePhone" (click)="sendToken()">ارسال رمز یکبار مصرف به شماره تلفن</button>
        </form>
      </div>
      <div class="image"></div>
    </mat-card-content>
  </mat-card>
</div>
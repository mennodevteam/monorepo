<main class="content-wrapper">
  <mat-toolbar>
    <h1 flex>{{ shop.title }}</h1>
    <span class="blue eng">#{{ shop.code }}</span>
  </mat-toolbar>

  <div class="form-page-layout">
    <div class="flex-col">
      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <i class="fa-solid fa-calendar-heart fa-xl"></i>
            <span spacer-sm></span>
            {{ 'home.planTitle' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content class="form-theme">
          <mat-list>
            <mat-list-item>
              <span matListItemLine> {{ 'home.renewAt' | translate }}: </span>
              <span matListItemMeta class="ltr"> {{ plugin?.renewAt | pdate: 'YYYY/MM/DD' }}</span>
            </mat-list-item>
            <mat-list-item>
              <span matListItemLine> {{ 'home.expiredAt' | translate }}: </span>
              <span matListItemMeta class="ltr"> {{ plugin?.expiredAt | pdate: 'YYYY/MM/DD' }}</span>
            </mat-list-item>
            <mat-list-item>
              <span matListItemLine>
                {{ 'home.remainDays' | translate: { value: (remainingDays | number: '1.0-0') } }}
              </span>
            </mat-list-item>
            <mat-progress-bar
              [value]="(remainingDays / totalDays) * 100"
              [color]="remainingDays > 20 ? 'accent' : 'warn'"
            ></mat-progress-bar>
          </mat-list>
          <span spacer></span>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions>
          <button mat-button color="primary" (click)="renew()">
            {{ 'home.renewAction' | translate }}
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card>
        <mat-card-header>
          <mat-card-title>
            <i class="fa-solid fa-message-dollar fa-xl"></i>
            <span spacer-sm></span>
            {{ 'home.smsAccount' | translate }}
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list *ngIf="shop.smsAccount">
            <mat-list-item>
              <span matListItemLine>{{ 'home.smsAccountCharge' | translate }}</span>
              <span matListItemMeta [ngClass]="{ 'red': shop.smsAccount.charge <= 1000 }">{{
                shop.smsAccount.charge | menuCurrency: '1.0-0':true
              }}</span>
            </mat-list-item>
            <mat-list-item>
              <span matListItemLine>{{ 'home.smsCount' | translate }}</span>
              <span matListItemMeta>{{
                'app.number' | translate: { value: (shop.smsAccount.charge / avgSmsCharge | number: '1.0-0') }
              }}</span>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions>
          <button mat-button color="primary" (click)="chargeSmsAccount()" [disabled]="redirectingChargeSms">
            {{ 'home.chargeSmsAccount' | translate }}
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <div class="flex-col">
      <mat-card>
        <mat-card-content>
          <mat-nav-list>
            <a mat-list-item routerLink="/menu">
              <i matListItemIcon class="fa-solid mat-icon fa-book-open"></i>
              <h3 matListItemTitle>{{ 'home.menu' | translate }}</h3>
              <span matListItemMeta class="red" *ngIf="plugin?.plugins?.indexOf(Plugin.Menu) == -1">
                {{ 'home.upgradePlan' | translate }}
              </span>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
            <mat-divider></mat-divider>
            <a mat-list-item routerLink="/orders">
              <i matListItemIcon class="fa-solid mat-icon fa-utensils"></i>
              <h3 matListItemTitle>{{ 'home.order' | translate }}</h3>
              <span matListItemMeta class="red" *ngIf="plugin?.plugins?.indexOf(Plugin.Ordering) == -1">
                {{ 'home.upgradePlan' | translate }}
              </span>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
            <mat-divider></mat-divider>
            <a mat-list-item routerLink="/club">
              <i matListItemIcon class="fa-solid mat-icon fa-crown"></i>
              <h3 matListItemTitle>{{ 'home.club' | translate }}</h3>
              <span matListItemMeta class="red" *ngIf="plugin?.plugins?.indexOf(Plugin.Club) == -1">
                {{ 'home.upgradePlan' | translate }}
              </span>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
          </mat-nav-list>
        </mat-card-content>
      </mat-card>

      <mat-card>
        <mat-card-content>
          <mat-nav-list>
            <a mat-list-item (click)="openApp()">
              <i matListItemIcon class="fa-solid mat-icon fa-mobile-screen-button"></i>
              <h3 matListItemTitle>{{ 'home.openApp' | translate }}</h3>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
            <mat-divider></mat-divider>
            <a mat-list-item (click)="sendLink()">
              <i matListItemIcon class="fa-solid mat-icon fa-message-sms"></i>
              <h3 matListItemTitle>{{ 'home.sendAppLink' | translate }}</h3>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
            <mat-divider></mat-divider>
            <a mat-list-item routerLink="/settings/qr">
              <i matListItemIcon class="fa-solid mat-icon fa-qrcode"></i>
              <h3 matListItemTitle>{{ 'home.qr' | translate }}</h3>
              <i matListItemMeta class="fa-regular fa-angle-left"></i>
            </a>
          </mat-nav-list>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</main>

<div class="wrapper">
  <mat-toolbar>
    <mat-toolbar-row>
      <button mat-icon-button goBack>
        <i class="fa-regular fa-arrow-right"></i>
      </button>
      <h1 flex>{{ 'menu.title' | translate: { value: shop?.title } }}</h1>
      <button mat-icon-button *ngIf="appConfig?.menuViewType === MenuViewType.Manual" (click)="toggleView()">
        <i class="fa-solid fa-list" *ngIf="viewType === MenuViewType.Card"></i>
        <i class="fa-solid fa-grid-2" *ngIf="viewType === MenuViewType.Grid"></i>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <section class="order-disable" *ngIf="appConfig?.disableOrderingText && appConfig?.disableOrdering">
    <disable-ordering-card></disable-ordering-card>
  </section>

  <mat-nav-list [ngSwitch]="orderType">
    <a mat-list-item [ngSwitch]="orderType" (click)="changeType()">
      <i matListItemIcon *ngSwitchCase="OrderType.DineIn" class="fa-solid fa-mug-hot"></i>
      <i matListItemIcon *ngSwitchCase="OrderType.Takeaway" class="fa-solid fa-cup-togo"></i>
      <i matListItemIcon *ngSwitchCase="OrderType.Delivery" class="fa-solid fa-moped"></i>
      <span matListItemTitle *ngIf="orderType || orderType === 0">
        {{ orderType | orderType }}
      </span>
      <span matListItemTitle *ngIf="!orderType && orderType !== 0" class="error-text">
        {{ 'orderType.select' | translate }}
      </span>
      <i matListItemMeta class="fa-regular fa-chevron-left"></i>
    </a>
    <mat-divider *ngIf="orderType !== OrderType.Takeaway"></mat-divider>
    <a mat-list-item *ngSwitchCase="OrderType.Delivery" (click)="selectDeliveryAddress()">
      <i matListItemIcon class="fa-solid fa-map-location-dot"></i>
      <span matListItemTitle *ngIf="!basket.address" class="error-text">
        {{ 'menu.selectDeliveryAddress' | translate }}
      </span>
      <span matListItemTitle *ngIf="basket.address">
        {{ basket.address.description }}
      </span>
      <span matListItemMeta *ngIf="basket.address && !basket.address?.deliveryArea" class="error-text">
        {{ 'locationsBottomSheet.outsideArea' | translate }}
      </span>
      <span
        matListItemMeta
        *ngIf="basket.address?.deliveryArea && basket.address?.deliveryArea?.status !== Status.Active"
        class="error-text"
      >
        {{ 'locationsBottomSheet.disabled' | translate }}
      </span>
      <span matListItemMeta *ngIf="deliveryCost" class="tertiary-text">
        {{ deliveryCost.price | menuCurrency }}
      </span>
      <i matListItemMeta *ngIf="!basket.address" class="fa-regular fa-chevron-left"></i>
    </a>
    <a mat-list-item *ngSwitchCase="OrderType.DineIn" (click)="selectDineInTable()">
      <i matListItemIcon class="fa-solid fa-chair"></i>
      <span matListItemTitle *ngIf="!basket.details?.table" class="error-text">
        {{ 'menu.selectDineInTable' | translate }}
      </span>
      <span matListItemTitle *ngIf="basket.details?.table">
        {{ basket.details?.table }}
      </span>
      <i matListItemMeta class="fa-regular fa-chevron-left"></i>
    </a>
  </mat-nav-list>

  <div class="menu">
    <menu-categories (chipClick)="categoryClick($event)"></menu-categories>

    <div
      *ngFor="let c of categories; let last = last"
      id="category_{{ c.id }}"
      #category
      class="category-wrapper"
    >
      <h3>
        <i *ngIf="c.faIcon" class="fa-solid fa-{{ c.faIcon }}"></i>
        {{ c.title }}
      </h3>
      <ng-container *ngIf="viewType === MenuViewType.Card">
        <category-card-view [category]="c"></category-card-view>
      </ng-container>
      <ng-container *ngIf="viewType === MenuViewType.Grid">
        <category-grid-view [category]="c" [menu]="menu" [appConfig]="appConfig"></category-grid-view>
      </ng-container>
      <span spacer-2x *ngIf="!last"></span>
    </div>
  </div>

  <mat-toolbar class="actions-toolbar background" *ngIf="basket.items?.length" routerLink="/basket">
    <button mat-raised-button color="primary">
      {{ 'menu.complete' | translate }}
    </button>
  </mat-toolbar>

  <div style="height: 72px"></div>
</div>
